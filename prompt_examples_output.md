# 交易知识模块系统 - 提示词效果演示

生成时间: 2025-01-18

---

## 目录

1. [所有可用模块列表](#1-所有可用模块)
2. [无模块配置（原始方式）](#2-无模块配置)
3. [保守型模板](#3-保守型模板)
4. [激进型模板](#4-激进型模板)
5. [平衡型模板](#5-平衡型模板)
6. [量化型模板](#6-量化型模板)
7. [趋势跟随型模板](#7-趋势跟随型模板)
8. [自定义配置示例](#8-自定义配置)
9. [模板对比表](#9-模板对比表)

---

## 1. 所有可用模块

系统提供 **11个专业交易知识模块**，分为以下类别：

### 核心模块
- **risk_management**: 风险管理
  - 包含止损、止盈、仓位控制等风险管理原则

- **position_sizing**: 仓位管理
  - 包含凯利公式、固定比例法等仓位计算方法

- **money_management**: 资金管理
  - 包含账户分配、资金分散等策略

### 技术分析模块
- **technical_theory**: 技术分析理论
  - 道氏理论、趋势分析、支撑阻力等核心概念

- **candlestick**: K线形态分析
  - 反转形态、持续形态等K线模式识别

- **indicator_combination**: 指标组合与共振
  - 多指标验证、共振信号识别

### 市场分析模块
- **market_cycle**: 市场周期认知
  - 牛市、熊市、震荡市的识别与应对

- **trend_strength**: 趋势强度评估
  - ADX、斜率、成交量等趋势确认方法

- **multi_timeframe**: 多时间框架分析
  - 大中小周期配合的分析方法

### 心理与量化模块
- **psychology**: 交易心理学
  - 避免情绪化交易、克服心理陷阱

- **quantitative**: 量化指标
  - 夏普比率、最大回撤等量化评估

---

## 2. 无模块配置

**使用场景**: 保持原始简单提示词，不添加任何交易知识

**启用模块**: 无

**生成的提示词**:
```
You are a professional cryptocurrency trader combining technical analysis with market insights.
```

**提示词长度**: 约 95 字符

**特点**:
- ✗ 没有风险管理指导
- ✗ 没有技术分析框架
- ✗ 没有市场周期认知
- ✗ AI依靠训练数据中的知识，可能不一致

---

## 3. 保守型模板

**适用人群**: 稳健投资者，重视本金安全

**启用模块** (4个):
- risk_management (风险管理)
- position_sizing (仓位管理)
- money_management (资金管理)
- psychology (交易心理学)

**参数配置**:
- 最大仓位: 20%
- 止损: 3%
- 止盈: 10%

**生成的提示词** (前2000字符):
```
You are a professional cryptocurrency trader with deep knowledge of technical analysis, risk management, and market psychology.

Your trading approach is grounded in proven methodologies and strict discipline.

# TRADING KNOWLEDGE BASE


## 风险管理原则 (Risk Management)

你必须严格遵守以下风险管理规则：

1. **仓位控制** (Position Sizing)
   - 单笔交易最大仓位：20%
   - 永远不要满仓操作
   - 分散投资，降低单一品种风险

2. **止损纪律** (Stop Loss)
   - 每笔交易必须设置止损
   - 默认止损：3.0%
   - 一旦触发，立即执行，不要犹豫
   - 不要移动止损位来承受更大亏损

3. **止盈策略** (Take Profit)
   - 设定合理的盈利目标：10.0%
   - 达到目标后可考虑分批止盈
   - 保护已有利润

4. **风险收益比** (Risk-Reward Ratio)
   - 每笔交易的风险收益比至少 1:2
   - 即：冒3.0%风险，追求至少6.0%收益
   - 不符合风险收益比的交易不做

5. **最大回撤控制** (Maximum Drawdown)
   - 账户最大回撤不超过 20%
   - 达到此阈值应暂停交易，重新评估策略


## 仓位管理 (Position Sizing)

科学的仓位管理方法：

1. **固定比例法**
   - 每次交易使用账户的固定百分比
   - 当前建议：单笔最大20%

2. **凯利公式** (Kelly Criterion)
   - f* = (bp - q) / b
   - 其中：
     - p = 胜率
     - q = 败率 (1-p)
     - b = 盈亏比
   - 示例：胜率60%，盈亏比2:1
     - f* = (2×0.6 - 0.4) / 2 = 40%
     - 实际使用凯利值的1/2或1/4更稳妥

3. **金字塔加仓**
   - 首次建仓：30-40%的计划仓位
   - 盈利后加仓：每次20-30%
   - 总仓位不超过最大限制

4. **波动率调整**
   - 高波动品种减少仓位
   - 低波动品种可适当增加
   - ATR可作为波动率参考


## 资金管理 (Money Management)

全局资金管理策略：

1. **账户分配**
   - 核心仓位：40-50% (长期持有优质资产)
   - 交易仓位：30-40% (主动交易)
   - 现金储备：20-30% (等待机会、应急)

2. **品种分散**
   - 不要把所有资金投入单一品种
   - 建议同时持有3-5个不相关品种
   - 降低系统性风险

3. **加仓减仓规则**
   - 盈利加仓：分批建仓，降低平均成本
   - 亏损不加仓：避免越跌越买的陷阱
   - 止盈分批：保护利润，避免一次性离场后踏空

4. **杠杆使用**
   - 谨慎使用杠杆，新手建议1-3倍
   - 高手也不建议超过10倍
   - 记住：杠杆放大收益也放大风险


## 交易心理学 (Psychology)

避免常见的交易心理陷阱：

1. **贪婪** (Greed)
   - 不要追求暴利
   - 见好就收，落袋为安
   - 制定盈利目标并严格执行

2. **恐惧** (Fear)
   - 不要因为短期波动恐慌
   - 相信你的分析和策略
   - 设好止损后不要频繁调整

3. **报复性交易** (Revenge Trading)
   - 亏损后不要急于"扳本"
   - 休息一下，冷静分析
   - 情绪化交易是大忌

4. **过度交易** (Overtrading)
   - 不是每天都要交易
   - 等待高质量信号
   - "不做也是一种做"

5. **确认偏误** (Confirmation Bias)
   - 不要只看支持你观点的信息
   - 主动寻找相反证据
   - 保持客观中立

6. **锚定效应** (Anchoring)
   - 不要被历史价格"锚定"
   - 关注当前市场和趋势
   - 过去的高点/低点不一定再现

7. **正确的交易心态**
   - 接受亏损是交易的一部分
   - 专注过程而非结果
   - 持续学习和改进
   - 保持纪律和耐心
```

**完整提示词长度**: 约 2500-3000 字符

**优势**:
- ✓ 强调风险控制，仓位限制严格
- ✓ 详细的资金管理方案
- ✓ 心理陷阱提醒，避免情绪化交易
- ✓ 适合初学者和稳健交易者

---

## 4. 激进型模板

**适用人群**: 追求高收益，能承受高风险的交易者

**启用模块** (4个):
- technical_theory (技术分析理论)
- candlestick (K线形态分析)
- trend_strength (趋势强度评估)
- indicator_combination (指标组合与共振)

**参数配置**:
- 最大仓位: 50%
- 止损: 8%
- 止盈: 25%

**生成的提示词** (前2000字符):
```
You are a professional cryptocurrency trader with deep knowledge of technical analysis, risk management, and market psychology.

Your trading approach is grounded in proven methodologies and strict discipline.

# TRADING KNOWLEDGE BASE


## 技术分析理论 (Technical Analysis Theory)

核心技术分析原理：

### 1. 道氏理论 (Dow Theory)
- **趋势的三种类型**
  - 主要趋势（Primary Trend）：持续1年以上
  - 次要趋势（Secondary Trend）：持续3周到3个月
  - 短期波动（Minor Trend）：持续数天

- **趋势的三个阶段**
  - 累积阶段（Accumulation）：聪明资金入场
  - 公众参与阶段（Public Participation）：趋势明确，大众跟随
  - 派发阶段（Distribution）：聪明资金离场

### 2. 趋势判断方法
- **上升趋势**：高点越来越高，低点越来越高
- **下降趋势**：高点越来越低，低点越来越低
- **横盘震荡**：在一定区间内反复波动

- **趋势线绘制**
  - 上升趋势线：连接两个或以上的低点
  - 下降趋势线：连接两个或以上的高点
  - 触及次数越多，趋势线越有效

### 3. 支撑与阻力 (Support & Resistance)
- **支撑位**：价格下跌过程中遇到买盘支撑的价位
- **阻力位**：价格上涨过程中遇到卖盘压制的价位

- **识别方法**
  - 历史高低点
  - 密集成交区
  - 整数关口（如10000, 20000等）
  - 均线位置（MA20, MA50, MA200）

- **角色互换**
  - 支撑位被跌破后变为阻力位
  - 阻力位被突破后变为支撑位

### 4. 背离与共振 (Divergence & Confluence)
- **背离**：价格走势与指标走势不一致
  - 顶背离：价格新高，指标未新高 → 看跌信号
  - 底背离：价格新低，指标未新低 → 看涨信号

- **共振**：多个指标同时发出相同信号
  - 共振信号可靠性更高
  - 例如：均线金叉 + MACD金叉 + RSI超卖反弹


## K线形态分析 (Candlestick Patterns)

重要的K线形态：

### 反转形态

1. **锤子线 / 上吊线** (Hammer / Hanging Man)
   - 特征：小实体，长下影线，无或短上影线
   - 底部出现为锤子线（看涨）
   - 顶部出现为上吊线（看跌）

2. **吞没形态** (Engulfing)
   - 看涨吞没：下跌后，阳线完全吞没前一根阴线
   - 看跌吞没：上涨后，阴线完全吞没前一根阳线

3. **早晨之星 / 黄昏之星** (Morning Star / Evening Star)
   - 早晨之星：三根K线，底部反转信号
     1. 长阴线
     2. 小实体（十字星或小阳线/阴线）
     3. 长阳线
   - 黄昏之星：三根K线，顶部反转信号
     1. 长阳线
     2. 小实体
     3. 长阴线

4. **十字星** (Doji)
   - 开盘价=收盘价或接近
   - 代表多空力量平衡
   - 在趋势中出现可能预示反转

### 持续形态

1. **三只乌鸦 / 三只白兵** (Three Black Crows / Three White Soldiers)
   - 三只乌鸦：连续三根阴线，持续下跌
   - 三只白兵：连续三根阳线，持续上涨

2. **窗口（跳空）** (Gap)
   - 突破性跳空：突破关键阻力
   - 持续性跳空：趋势中途
   - 竭尽性跳空：趋势末期

### 使用技巧
- K线形态需结合成交量验证
- 形态越标准，可靠性越高
- 关注形态出现的位置（顶部/底部/中途）
- 等待确认（下一根K线）再交易


## 趋势强度评估 (Trend Strength Assessment)

评估趋势强度的方法：

### 1. ADX指标 (Average Directional Index)
- ADX > 25：有趋势
- ADX > 50：强趋势
- ADX < 20：无趋势（震荡）

- 配合使用：
  - +DI > -DI：上升趋势
  - -DI > +DI：下降趋势

### 2. 趋势线斜率
- 斜率越陡，趋势越强
- 过于陡峭的趋势不可持续
- 理想斜率：30-45度

### 3. 成交量确认
- 上涨伴随放量：健康的上升趋势
- 上涨伴随缩量：警惕趋势减弱
- 下跌伴随放量：强烈的下降趋势
- 下跌伴随缩量：下跌动能衰竭

### 4. 波动率分析 (ATR - Average True Range)
- ATR扩大：波动增加，趋势可能增强
- ATR收缩：波动减少，趋势可能减弱
- 可用于调整止损距离

### 5. 均线排列
- 多头排列：短期均线 > 中期均线 > 长期均线
  - 强势上升趋势
- 空头排列：短期均线 < 中期均线 < 长期均线
  - 强势下降趋势


## 指标组合与共振 (Indicator Combination & Confluence)

多指标验证的策略：

### 1. 趋势类 + 震荡类组合
- MA + RSI
  - MA判断趋势方向
  - RSI寻找超买超卖
  - 配合使用：上升趋势中RSI超卖时买入

- MACD + KDJ
  - MACD看中长期趋势
  - KDJ看短期超买超卖
  - 双金叉共振：强买入信号

### 2. 经典三重确认
- 趋势确认（MA/EMA）
- 动量确认（MACD）
- 超买超卖确认（RSI/KDJ）

- 三者同时发出信号 → 高可靠性交易机会

### 3. 布林带 + RSI
- 价格触及下轨 + RSI<30 → 超卖，考虑买入
- 价格触及上轨 + RSI>70 → 超买，考虑卖出
- 布林带收窄 → 震荡，等待突破

### 4. 成交量 + 价格
- 放量突破：有效突破
- 缩量突破：假突破可能性大
- 量价背离：价涨量跌或价跌量涨 → 警惕反转

### 5. 多时间周期共振
- 日线 + 4小时 + 1小时 同时发出信号
- 大周期定方向，小周期找入场点

### 使用原则
- 指标不是越多越好，3-4个足够
- 避免同类指标重复（如多个震荡指标）
- 指标应相互补充，而非重复确认
- 最终以价格行为为准
```

**完整提示词长度**: 约 3000-3500 字符

**优势**:
- ✓ 丰富的技术分析理论
- ✓ 详细的K线形态识别
- ✓ 多指标共振策略
- ✓ 适合追求高收益的技术派交易者

---

## 5. 平衡型模板

**适用人群**: 大多数交易者，风险收益平衡

**启用模块** (5个):
- risk_management (风险管理)
- technical_theory (技术分析理论)
- market_cycle (市场周期认知)
- psychology (交易心理学)
- indicator_combination (指标组合与共振)

**参数配置**:
- 最大仓位: 30%
- 止损: 5%
- 止盈: 15%

**特点**: 这是**推荐配置**，综合了风险管理、技术分析、市场认知、交易心理等多个维度

**完整提示词长度**: 约 4000-4500 字符

**优势**:
- ✓ 最全面的交易知识体系
- ✓ 平衡风险与收益
- ✓ 既有风控又有技术分析
- ✓ 考虑市场周期和心理因素
- ✓ 适合90%的交易场景

---

## 6. 量化型模板

**适用人群**: 数据驱动的系统化交易者

**启用模块** (5个):
- risk_management (风险管理)
- indicator_combination (指标组合与共振)
- quantitative (量化指标)
- multi_timeframe (多时间框架分析)
- trend_strength (趋势强度评估)

**参数配置**:
- 最大仓位: 30%
- 止损: 5%
- 止盈: 15%

**优势**:
- ✓ 强调数据和指标
- ✓ 系统化的多周期分析
- ✓ 量化评估指标（夏普比率、回撤等）
- ✓ 适合程序化交易思维

---

## 7. 趋势跟随型模板

**适用人群**: 只做趋势，顺势而为的交易者

**启用模块** (5个):
- technical_theory (技术分析理论)
- trend_strength (趋势强度评估)
- market_cycle (市场周期认知)
- multi_timeframe (多时间框架分析)
- risk_management (风险管理)

**参数配置**:
- 最大仓位: 40%
- 止损: 6%
- 止盈: 20%

**优势**:
- ✓ 专注趋势判断和跟随
- ✓ 多周期验证趋势
- ✓ 市场周期结合
- ✓ 适合中长线交易者

---

## 8. 自定义配置

**示例：只关注风险和心理**

```python
custom_modules = ['risk_management', 'psychology', 'market_cycle']
custom_params = {
    'max_position_size': 0.25,  # 25%
    'stop_loss_pct': 0.04,      # 4%
    'take_profit_pct': 0.12     # 12%
}
```

**生成的提示词**:
- 包含风险管理原则（25%仓位，4%止损，12%止盈）
- 包含交易心理学指导
- 包含市场周期认知
- 总长度约 2000-2500 字符

**使用场景**:
- 你已经有技术分析经验，只需要风控和心理提醒
- 你想专注某几个特定方面
- 你在A/B测试不同配置的效果

---

## 9. 模板对比表

| 模板 | 启用模块数 | 提示词长度 | 最大仓位 | 止损 | 止盈 | 适用场景 |
|------|-----------|-----------|---------|------|------|---------|
| **无模块** | 0 | ~100字符 | - | - | - | 保持原始简单方式 |
| **保守型** | 4 | ~2500字符 | 20% | 3% | 10% | 稳健投资者，重视风控 |
| **激进型** | 4 | ~3500字符 | 50% | 8% | 25% | 追求高收益，技术派 |
| **平衡型** | 5 | ~4500字符 | 30% | 5% | 15% | **推荐**，适合大多数人 |
| **量化型** | 5 | ~4000字符 | 30% | 5% | 15% | 数据驱动，系统化交易 |
| **趋势型** | 5 | ~4000字符 | 40% | 6% | 20% | 趋势跟随者，中长线 |

---

## 观察与建议

### 提示词长度影响

1. **短提示词（<500字符）**
   - 优点：AI响应快，token消耗少
   - 缺点：缺乏专业指导，决策质量依赖AI训练数据

2. **中等提示词（2000-3000字符）**
   - 优点：提供核心交易知识，平衡效率和质量
   - 缺点：可能不够全面
   - **推荐：保守型、自定义配置**

3. **长提示词（4000+字符）**
   - 优点：全面的交易知识体系，决策更专业
   - 缺点：token消耗较多，AI处理时间稍长
   - **推荐：平衡型、量化型、趋势型**

### 模块组合建议

**必选模块（任何配置都建议包含）**:
- risk_management（风险管理）

**技术派交易者**:
- technical_theory + candlestick + indicator_combination

**稳健型交易者**:
- risk_management + position_sizing + psychology + money_management

**全能型交易者**:
- 平衡型模板（5个核心模块）

### 使用技巧

1. **不是越多越好**
   - 3-5个模块是最佳平衡点
   - 过多模块可能让AI"overthink"

2. **根据市场调整**
   - 牛市：启用 technical_theory + trend_strength
   - 熊市：启用 risk_management + psychology
   - 震荡市：启用 candlestick + indicator_combination

3. **定期评估**
   - 回测不同配置的效果
   - 根据实际表现调整模块
   - 记录每个配置的胜率和盈亏比

---

## 总结

交易知识模块系统为AI交易提供了：

✅ **11个专业模块** - 覆盖风险管理、技术分析、市场认知、交易心理等

✅ **5个预设模板** - 适合不同风格的交易者

✅ **完全可配置** - 自由选择需要的模块和参数

✅ **向后兼容** - 不用模块系统也能正常运行

✅ **即插即用** - 无需修改核心代码

现在，您的AI交易系统拥有了真正的**交易认知**！
